# 从零开始创建一次性任务流

本章节描述如何从零开始创建手动触发的一次性工作流程。


## 开始前准备<beforestart>

确保你已创建用于运行数据的资源的代码和脚本。更多信息，参考[创建资源](creating_resource)。

.. note:: 创建后，一次性任务流不会影响周期性任务流。

## 步骤1：创建任务流<createworkflow>

1. 在EnOS控制台中选择 **数据开发套件 > 数据开发** ，单击目录树上方的 **+**。

2. 在 **新建任务流** 窗口中，完成以下设置，然后单击 **确认**。

   - 方式：选择新建。
   - 名称：输入任务流的名称。
   - 调度类型：选择 **手动调度**。
   - 描述：输入有关任务流的描述性信息。
   - 选择目录：选择存储任务流的目录。

## 步骤2：（可选）添加引用<addreference>

如果任务流依赖于另一个任务流或任务，则需添加引用作为根节点。

- 引用任务流：将 **任务流依赖** 类型的引用拖曳到配置面板中，选择依赖的任务流，然后点击 **创建**。
- 引用任务：将 **任务节点依赖** 类型的引用拖曳到配置面板中，选择依赖的任务节点，然后点击 **创建**。

根据需求，重复次步骤添加更多引用。


## 步骤3：添加任务节点<addnode>

添加任务节点的步骤如下：

1. 将 **组件** 面板中的 **SHELL** 拖曳到配置面板中。

2. 在 **新建任务节点** 窗口中，输入任务节点名称和描述。任务名在同一任务流中不可重复。

3. 点击 **创建**。

4. 双击刚刚创建的节点。

5. 输入要运行的命令，选择资源和资源版本。

6. 点击配置面板右边缘的 **节点配置** 并完成调度属性的设置：

   - 具体时间：使用7个字符的CronTab语法描述运行任务的确切时间。例如，值`59 59 23 * * ? *`表示任务在每天23:59:59运行。有关CronTab的更多信息，参阅[http://cron.qqe2.com/](http://cron.qqe2.com/)。
   - 超时时间：认定任务超时的时长
   - 重试次数：超时后，重新尝试连接的次数。
   - 重试间隔：每次重新尝试之间的间隔。
   - 可否被依赖：设定改任务是否可以被其他任务流引用。

7. 点击配置面板右边缘的 **参数设置** 可设定任务中使用到的参数值。可以为参数指定常量，系统变量或自定义变量。更多信息，参考[设置任务流或SHELL类型任务的参数](setting_parameters)。

8. 点击 **保存**，然后点击 **返回任务流面板**。

根据需求，重复步骤1到8添加更多任务节点。


## 步骤4：添加关联线<addline>

.. note:: 引用必须是根节点。

1. 单击 **关联线**。

2. 单击上游任务将显示箭头，拖动箭头至下游任务。

根据需求重复步骤1和2完成所有关联。

## 步骤5：配置调度<configschedule>

1. 点击配置面板右边缘的 **调度配置**。

2. 提供基本设置：

   - **负责人**：负责人可以是本组织中具有访问数据集权利的用户。默认为任务流创建者。负责人具有以下事实：
     - 作为创建者，无法删除自己。
     - 可以在同一组织中添加其他负责人。
     - 同一负责人可不再创建具有相同名称的另一个任务流。
   - **描述**：（可选）输入任务流和调度配置描述。
   - **预警方式**：选择告警的方式。邮件为强制选择项。
     - 邮件：当实例满足告警条件时，会向负责人发送告警电子邮件。当任务失败时，告警的副本也会发送给受影响的下游任务负责人（如果有）。
     - 短信：必须是在用户注册期间通过短信认证的电话号码。当实例满足告警条件时，短信告警仅发送给负责人。

## 步骤6：配置参数<configparameter>

当参数使用在配置数据源和目标时，需指定参数值。有关更多信息，请参阅[设置任务流或SHELL类型任务的参数](setting_parameters)。


## 后续操作<followup>

点击 **预跑** 测试任务流。

实例将在运行任务流后产生。然后，你可在数据运维中跟踪有关实例的详细信息。更多信息，参考[监控手动任务流](../task_monitor/monitoring_workflow_manual)。

从数据源同步数据后，你可以根据数据设置其他处理任务。更多信息，参考[数据开发套件](dataide_overview).
